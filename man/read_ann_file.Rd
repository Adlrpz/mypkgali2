% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/read_ann_file.R
\name{read_ann_file}
\alias{read_ann_file}
\title{Leer y decodificar archivos .ANN de ECG}
\usage{
read_ann_file(filepath, filename)
}
\arguments{
\item{filepath}{Ruta al directorio donde se encuentra el archivo \code{.ANN}.}

\item{filename}{Nombre del archivo \code{.ANN} (por ejemplo, \code{"Thoth_20230208220000s.ANN"}).}
}
\value{
Una lista con:
\describe{
\item{RR}{Vector numérico con los intervalos RR en milisegundos.}
\item{RR_time}{Vector acumulado del tiempo total transcurrido desde el inicio del registro.}
\item{ANNtype}{Vector de caracteres con el tipo de latido interpretado (por ejemplo, 'N', 'V', '*').}
}
}
\description{
La función \code{read_ann_file()} nos permite leer archivos binarios \code{.ANN} que contienen las anotaciones limpias de latidos cardíacos procedentes de señales de electocardiogramas o ECG.
Los archivos presentan la siguiente estructura: comienzan con 12 bytes de cabecera, terminan con 14 bytes de cierre, y contienen bloques intermedios de 8 bytes por cada latido.
}
\section{Objetivo principal}{

#' La función realiza las siguientes operaciones:
\enumerate{
\item Lee el archivo binario completo.
\item Elimina los bytes de cabecera y pie.
\item Extrae los bloques de 8 bytes por latido.
\item Calcula los intervalos RR acumulados (RR_time).
\item Interpreta los códigos de tipo de latido (ANNtype) según su valor ASCII.
}
}

\section{Detalles}{

Cada bloque de 8 bytes codifica:
\itemize{
\item El intervalo RR, es decir, tiempo entre latidos consecutivos, en muestras (típicamente a 1000 Hz).
\item El tipo de latido, codificado en formato ASCII.
}

Algunos ejemplos de tipo de latido son:
\tabular{llll}{
\strong{Código ASCII} \tab \strong{Símbolo} \tab \strong{Significado clínico} \tab \strong{Tratamiento} \cr
4 \tab N \tab Latido normal del seno \tab Usar para HRV \cr
20 \tab V \tab PVC (latido ventricular prematuro) \tab Outlier, excluir \cr
36 \tab S \tab Latido supraventricular ectópico \tab Excluir \cr
40 \tab E \tab Escape ventricular \tab Incluir si relevante \cr
88 \tab * \tab Artefacto/anotación especial \tab Ignorar \cr
(y otros)
}
}

\examples{
\dontrun{
# Suponiendo que tienes un archivo ANN en "datos/Thoth_20230208220000s.ANN"
resultado <- read_ann_file(filepath = "datos", filename = "Thoth_20230208220000s.ANN")

# Ver los primeros 10 intervalos RR
head(resultado$RR, 10)

# Ver los tipos de los primeros latidos
head(resultado$ANNtype, 10)
}

}
\seealso{
\code{\link{clean_rr_segments}} para limpieza e interpolación de la señal.
}
